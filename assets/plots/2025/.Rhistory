g5 <- journal.pais %>%
group_by(Subjects) %>%
count() %>%
filter(n > 5) %>%
mutate(Subjects = reorder(Subjects, n)) %>%
ggplot(aes(x = reorder(Subjects, n), y = n, fill = Subjects)) +
geom_col() +
theme_minimal() +
theme(legend.position = "none") +
ylab("Temas") +
xlab(NULL) +
ggtitle(paste("Temas de publicación de revistas en", pais)) +
coord_flip() +
labs(caption = "Citar como: Romina De León, 2025. Análisis de revistas latinoamericanas en DOAJ.")
print(g5)
guardar_grafico(g5, "temas_", pais)
# Gráfico por temas
g6 <- journal.pais %>%
group_by(id) %>%
count() %>%
filter(n > 5) %>%
mutate(id = reorder(id, n)) %>%
ggplot(aes(x = id, y = n, fill = id)) +
geom_col() +
theme_minimal() +
theme(legend.position = "none") +
ylab("Identificadores persistentes") +
xlab(NULL) +
ggtitle(paste("Identificadores persistentes de revistas en", pais)) +
coord_flip() +
labs(caption = "Citar como: Romina De León, 2025. Análisis de revistas latinoamericanas en DOAJ.")
print(g5)
guardar_grafico(g6, "identificadores_", pais)
}
walk(selected_countries, analizar_pais)
analizar_pais <- function(pais, data = journal.amlat) {
library(dplyr)
library(ggplot2)
# Filtrar datos por país
journal.pais <- data %>% filter(country == pais)
# Mostrar total de revistas
total.pais <- length(journal.pais$title)
print(paste("Total de revistas en", pais, ":", total.pais))
# Helper para guardar
guardar_grafico <- function(plot, nombre, pais) {
ruta <- file.path(dir_output, paste0(nombre, "_", pais, ".jpg"))
ggsave(filename = file.path(dir_output, ruta), plot = plot, width = 3000, height = 1500, units = "px", dpi = 300)
}
# Gráfico por idioma
g1 <- journal.pais %>%
group_by(language) %>%
count() %>%
filter(n > 5) %>%
mutate(language = reorder(language, n)) %>%
ggplot(aes(x = reorder(language, n), y = n, fill = language)) +
geom_col() +
theme_minimal() +
theme(legend.position = "n") +
ylab("Número de veces que aparecen") +
xlab(NULL) +
ggtitle(paste("Idiomas de publicación de revistas en", pais)) +
coord_flip() +
labs(caption = "Citar como: Romina De León, 2025. Análisis de revistas latinoamericanas en DOAJ.")
print(g1)
guardar_grafico(g1, "idiomas_", pais)
# Gráfico por editorial
g2 <- journal.pais %>%
group_by(Publisher) %>%
count() %>%
filter(n > 5) %>%
mutate(Publisher = reorder(Publisher, n)) %>%
ggplot(aes(x = reorder(Publisher, n), y = n, fill = Publisher)) +
geom_col() +
theme_minimal() +
theme(legend.position = "none") +
ylab("Cantidad de revistas publicadas por") +
xlab(NULL) +
ggtitle(paste("Editorial de publicación de revistas en", pais)) +
coord_flip() +
labs(caption = "Citar como: Romina De León, 2025. Análisis de revistas latinoamericanas en DOAJ.")
print(g2)
guardar_grafico(g2, "editorial_", pais)
# Gráfico por licencias
g3 <- journal.pais %>%
group_by(license) %>%
count() %>%
filter(n > 1) %>%
mutate(license = reorder(license, n)) %>%
ggplot(aes(x = reorder(license, n), y = n, fill = license)) +
geom_col() +
theme_minimal() +
theme(legend.position = "none") +
ylab("Tipo de licencias") +
xlab(NULL) +
ggtitle(paste("Licencias de publicación de revistas en", pais)) +
coord_flip() +
labs(caption = "Citar como: Romina De León, 2025. Análisis de revistas latinoamericanas en DOAJ.")
print(g3)
guardar_grafico(g3, "licencias_", pais)
# Gráfico por proceso de revisión
g4 <- journal.pais %>%
group_by(Review) %>%
count() %>%
filter(n > 5) %>%
mutate(Review = reorder(Review, n)) %>%
ggplot(aes(x = reorder(Review, n), y = n, fill = Review)) +
geom_col() +
theme_minimal() +
theme(legend.position = "none") +
ylab("Proceso de revisión") +
xlab(NULL) +
ggtitle(paste("Proceso de revisión de revistas en", pais)) +
coord_flip() +
labs(caption = "Citar como: Romina De León, 2025. Análisis de revistas latinoamericanas en DOAJ.")
print(g4)
guardar_grafico(g4, "revision_", pais)
# Gráfico por temas
g5 <- journal.pais %>%
group_by(Subjects) %>%
count() %>%
filter(n > 5) %>%
mutate(Subjects = reorder(Subjects, n)) %>%
ggplot(aes(x = reorder(Subjects, n), y = n, fill = Subjects)) +
geom_col() +
theme_minimal() +
theme(legend.position = "none") +
ylab("Temas") +
xlab(NULL) +
ggtitle(paste("Temas de publicación de revistas en", pais)) +
coord_flip() +
labs(caption = "Citar como: Romina De León, 2025. Análisis de revistas latinoamericanas en DOAJ.")
print(g5)
guardar_grafico(g5, "temas_", pais)
# Gráfico por temas
g6 <- journal.pais %>%
group_by(id) %>%
count() %>%
filter(n > 5) %>%
mutate(id = reorder(id, n)) %>%
ggplot(aes(x = id, y = n, fill = id)) +
geom_col() +
theme_minimal() +
theme(legend.position = "none") +
ylab("Identificadores persistentes") +
xlab(NULL) +
ggtitle(paste("Identificadores persistentes de revistas en", pais)) +
coord_flip() +
labs(caption = "Citar como: Romina De León, 2025. Análisis de revistas latinoamericanas en DOAJ.")
print(g5)
guardar_grafico(g6, "identificadores_", pais)
}
analizar_pais("Argentina")
analizar_pais <- function(pais, data = journal.amlat) {
library(dplyr)
library(ggplot2)
# Filtrar datos por país
journal.pais <- data %>% filter(country == pais)
# Mostrar total de revistas
total.pais <- length(journal.pais$title)
print(paste("Total de revistas en", pais, ":", total.pais))
# Helper para guardar
guardar_grafico <- function(plot, nombre, pais) {
ruta <- file.path(dir_output, paste0(nombre, pais, ".jpg"))
ggsave(filename = ruta, plot = plot, width = 3000, height = 1500, units = "px", dpi = 300)
}
# Gráfico por idioma
g1 <- journal.pais %>%
group_by(language) %>%
count() %>%
filter(n > 5) %>%
mutate(language = reorder(language, n)) %>%
ggplot(aes(x = reorder(language, n), y = n, fill = language)) +
geom_col() +
theme_minimal() +
theme(legend.position = "n") +
ylab("Número de veces que aparecen") +
xlab(NULL) +
ggtitle(paste("Idiomas de publicación de revistas en", pais)) +
coord_flip() +
labs(caption = "Citar como: Romina De León, 2025. Análisis de revistas latinoamericanas en DOAJ.")
print(g1)
guardar_grafico(g1, "idiomas_", pais)
# Gráfico por editorial
g2 <- journal.pais %>%
group_by(Publisher) %>%
count() %>%
filter(n > 5) %>%
mutate(Publisher = reorder(Publisher, n)) %>%
ggplot(aes(x = reorder(Publisher, n), y = n, fill = Publisher)) +
geom_col() +
theme_minimal() +
theme(legend.position = "none") +
ylab("Cantidad de revistas publicadas por") +
xlab(NULL) +
ggtitle(paste("Editorial de publicación de revistas en", pais)) +
coord_flip() +
labs(caption = "Citar como: Romina De León, 2025. Análisis de revistas latinoamericanas en DOAJ.")
print(g2)
guardar_grafico(g2, "editorial_", pais)
# Gráfico por licencias
g3 <- journal.pais %>%
group_by(license) %>%
count() %>%
filter(n > 1) %>%
mutate(license = reorder(license, n)) %>%
ggplot(aes(x = reorder(license, n), y = n, fill = license)) +
geom_col() +
theme_minimal() +
theme(legend.position = "none") +
ylab("Tipo de licencias") +
xlab(NULL) +
ggtitle(paste("Licencias de publicación de revistas en", pais)) +
coord_flip() +
labs(caption = "Citar como: Romina De León, 2025. Análisis de revistas latinoamericanas en DOAJ.")
print(g3)
guardar_grafico(g3, "licencias_", pais)
# Gráfico por proceso de revisión
g4 <- journal.pais %>%
group_by(Review) %>%
count() %>%
filter(n > 5) %>%
mutate(Review = reorder(Review, n)) %>%
ggplot(aes(x = reorder(Review, n), y = n, fill = Review)) +
geom_col() +
theme_minimal() +
theme(legend.position = "none") +
ylab("Proceso de revisión") +
xlab(NULL) +
ggtitle(paste("Proceso de revisión de revistas en", pais)) +
coord_flip() +
labs(caption = "Citar como: Romina De León, 2025. Análisis de revistas latinoamericanas en DOAJ.")
print(g4)
guardar_grafico(g4, "revision_", pais)
# Gráfico por temas
g5 <- journal.pais %>%
group_by(Subjects) %>%
count() %>%
filter(n > 5) %>%
mutate(Subjects = reorder(Subjects, n)) %>%
ggplot(aes(x = reorder(Subjects, n), y = n, fill = Subjects)) +
geom_col() +
theme_minimal() +
theme(legend.position = "none") +
ylab("Temas") +
xlab(NULL) +
ggtitle(paste("Temas de publicación de revistas en", pais)) +
coord_flip() +
labs(caption = "Citar como: Romina De León, 2025. Análisis de revistas latinoamericanas en DOAJ.")
print(g5)
guardar_grafico(g5, "temas_", pais)
# Gráfico por temas
g6 <- journal.pais %>%
group_by(id) %>%
count() %>%
filter(n > 5) %>%
mutate(id = reorder(id, n)) %>%
ggplot(aes(x = id, y = n, fill = id)) +
geom_col() +
theme_minimal() +
theme(legend.position = "none") +
ylab("Identificadores persistentes") +
xlab(NULL) +
ggtitle(paste("Identificadores persistentes de revistas en", pais)) +
coord_flip() +
labs(caption = "Citar como: Romina De León, 2025. Análisis de revistas latinoamericanas en DOAJ.")
print(g5)
guardar_grafico(g6, "identificadores_", pais)
}
walk(selected_countries, analizar_pais)
selected_countries
analizar_pais("Argentina")
analizar_pais("Brazil")
analizar_pais("Chile")
analizar_pais("Colombia")
analizar_pais("Mexico")
analizar_pais("Ecuador")
analizar_pais("Costa Rica")
analizar_pais("Bolivia, Plurinational State of")
analizar_pais("Dominican Republic")
analizar_pais("El Salvador")
analizar_pais("Guatemala")
analizar_pais("Honduras")
analizar_pais("Nicaragua")
analizar_pais("Panama")
analizar_pais("Paraguay")
analizar_pais("Peru")
analizar_pais("Uruguay")
analizar_pais("Venezuela, Bolivarian Republic of")
rlang::last_trace()
rlang::last_trace()
journal.amlat %>%
group_by(Subjects) %>%
count() %>%
filter(n > 12) %>%
mutate(Subjects = fct_reorder(Subjects, n)) %>%
ggplot(aes(x = reorder(Subjects, n), y = n, fill = Subjects)) +
geom_col() +
theme_minimal() +
theme(legend.position = "n") +
ylab("Frecuencia") +
xlab("Áreas") +
ggtitle("Áreas de publicación de revistas en América Latina",
subtitle = "Frecuencia mayor a 12") +
scale_fill_manual(values = paleta2) +
coord_flip() +
labs(caption = "Citar como: Romina De León, 2025. Análisis de revistas latinoamericanas en DOAJ.")
analizar_pais <- function(pais, data = journal.amlat, dir_output = "graficos") {
# Cargar librerías (mejor al inicio del script)
suppressPackageStartupMessages({
library(dplyr)
library(ggplot2)
library(forcats) # Para mejor manejo de factores
})
# Verificar/crear directorio de salida
if (!dir.exists(dir_output)) {
dir.create(dir_output)
}
# Filtrar datos por país (con verificación)
if (!"country" %in% names(data)) {
stop("El dataframe no contiene una columna 'country'")
}
journal.pais <- data %>%
filter(country == pais)
if (nrow(journal.pais) == 0) {
stop("No se encontraron revistas para el país especificado: ", pais)
}
# Mostrar resumen estadístico
total.pais <- nrow(journal.pais)
message("\n=== Análisis para: ", pais, " ===")
message("Total de revistas: ", total.pais)
# Función helper mejorada para guardar gráficos
guardar_grafico <- function(plot, nombre, ancho = 30, alto = 15) {
nombre_archivo <- paste0(nombre, tolower(gsub(" ", "_", pais)), ".jpg")
ruta <- file.path(dir_output, nombre_archivo)
ggsave(
filename = ruta,
plot = plot,
width = ancho,
height = alto,
units = "cm",
dpi = 300
)
message("Gráfico guardado: ", nombre_archivo)
}
# Función para crear gráficos de barras horizontales (DRY principle)
crear_grafico_barras <- function(var, titulo, filtro_min = 5) {
journal.pais %>%
count(!!sym(var)) %>%
filter(n >= filtro_min) %>%
mutate(categoria = fct_reorder(!!sym(var), n)) %>%
ggplot(aes(x = categoria, y = n, fill = categoria)) +
geom_col() +
geom_text(aes(label = n), hjust = -0.3, size = 3) +
theme_minimal() +
theme(
legend.position = "none",
plot.title = element_text(size = 12, face = "bold"),
plot.caption = element_text(size = 8, color = "gray50")
) +
labs(
y = "Cantidad de revistas",
x = NULL,
title = paste(titulo, "en", pais),
caption = "Citar como: Romina De León, 2025. Análisis de revistas latinoamericanas en DOAJ."
) +
coord_flip()
}
# Crear y mostrar gráficos
variables <- list(
"language" = "Idiomas de publicación",
"Publisher" = "Editoriales",
"license" = "Licencias de publicación",
"Review" = "Procesos de revisión",
"Subjects" = "Temas de publicación",
"id" = "Identificadores persistentes"
)
# Generar todos los gráficos
graficos <- lapply(names(variables), function(var) {
g <- crear_grafico_barras(var, variables[[var]])
print(g)
guardar_grafico(g, paste0(var, "_"))
return(g)
})
# Retornar lista con todos los gráficos y datos
invisible(list(
datos = journal.pais,
total = total.pais,
graficos = graficos
))
}
walk(selected_countries, analizar_pais)
rlang::last_trace()
#mejorado con IA
analizar_pais <- function(pais, data = journal.amlat, dir_output = "graficos") {
# Cargar librerías
suppressPackageStartupMessages({
library(dplyr)
library(ggplot2)
library(forcats)
})
# Verificar/crear directorio de salida
if (!dir.exists(dir_output)) {
dir.create(dir_output)
}
# Verificar estructura de los datos
if (!"country" %in% names(data)) {
stop("El dataframe no contiene una columna 'country'")
}
# Filtrar datos por país
journal.pais <- data %>%
filter(country == pais)
if (nrow(journal.pais) == 0) {
stop("No se encontraron revistas para el país especificado: ", pais)
}
# Mostrar resumen estadístico
total.pais <- nrow(journal.pais)
message("\n=== Análisis para: ", pais, " ===")
message("Total de revistas: ", total.pais)
# Función helper para guardar gráficos
guardar_grafico <- function(plot, nombre, ancho = 30, alto = 15) {
nombre_archivo <- paste0(nombre, tolower(gsub(" ", "_", pais)), ".jpg")
ruta <- file.path(dir_output, nombre_archivo)
ggsave(
filename = ruta,
plot = plot,
width = ancho,
height = alto,
units = "cm",
dpi = 300
)
message("Gráfico guardado: ", nombre_archivo)
}
# Función para crear gráficos de barras horizontales simplificados
crear_grafico_simple <- function(var, titulo, filtro_min = 5) {
# Verificar si la variable existe
if (!var %in% names(journal.pais)) {
warning("La columna '", var, "' no existe en los datos. Omitiendo gráfico.")
return(NULL)
}
# Preparar datos
plot_data <- journal.pais %>%
count(!!sym(var)) %>%
filter(n >= filtro_min)
if (nrow(plot_data) == 0) {
warning("No hay suficientes datos (n >= ", filtro_min, ") para '", var, "'. Omitiendo gráfico.")
return(NULL)
}
# Crear gráfico minimalista
plot_data %>%
mutate(categoria = fct_reorder(!!sym(var), n)) %>%
ggplot(aes(x = categoria, y = n, fill = categoria)) +
geom_col(show.legend = FALSE) +
theme_minimal() +
theme(
plot.title = element_text(size = 12, face = "bold"),
plot.caption = element_text(size = 8, color = "gray30"),
axis.text = element_text(size = 10),
axis.title = element_text(size = 10)
) +
labs(
y = "Cantidad de revistas",
x = NULL,
title = paste(titulo, "en", pais),
caption = "Citar como: Romina De León, 2025. Análisis de revistas latinoamericanas en DOAJ."
) +
coord_flip()
}
# Variables a graficar (ajusta según tu dataframe)
variables_grafico <- c(
"language" = "Idiomas de publicación",
"Publisher" = "Editoriales",
"license" = "Licencias de publicación",
"Review" = "Procesos de revisión",
"Subjects" = "Temas de publicación"
)
# Filtrar solo variables que existen
variables_grafico <- variables_grafico[names(variables_grafico) %in% names(journal.pais)]
# Generar gráficos
graficos <- list()
for (var in names(variables_grafico)) {
g <- crear_grafico_simple(var, variables_grafico[var])
if (!is.null(g)) {
print(g)
guardar_grafico(g, paste0(var, "_"))
graficos[[var]] <- g
}
}
# Retornar resultados
invisible(list(
datos = journal.pais,
total = total.pais,
graficos = graficos
))
}
analizar_pais("Argentina")
analizar_pais("Brazil")
analizar_pais("Chile")
analizar_pais("Colombia")
analizar_pais("Mexico")
analizar_pais("Ecuador")
analizar_pais("Costa Rica")
analizar_pais("Bolivia, Plurinational State of")
analizar_pais("Dominican Republic")
analizar_pais("El Salvador")
analizar_pais("Guatemala")
analizar_pais("Honduras")
analizar_pais("Nicaragua")
analizar_pais("Panama")
analizar_pais("Paraguay")
analizar_pais("Peru")
analizar_pais("Uruguay")
analizar_pais("Venezuela, Bolivarian Republic of")
